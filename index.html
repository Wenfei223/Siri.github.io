<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Siriæ‹çˆ±äººç”Ÿæ¨¡æ‹Ÿå™¨ Ultimate</title>
    <style>
        :root {
            --main-color: #FFD700;
            --bg-color: #FFF9C4;
            --text-color: #6D4C41;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: var(--main-color);
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        #content {
            min-height: 200px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            background: var(--main-color);
            color: var(--text-color);
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .code-editor {
            width: 100%;
            height: 200px;
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 10px 0;
            border: 1px solid var(--main-color);
        }

        .code-toolbar {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }

        .code-error {
            color: #ff5555;
            margin: 10px 0;
            display: none;
        }

        .code-success {
            color: #50fa7b;
            margin: 10px 0;
            display: none;
        }

        .toggle-button {
            background: var(--main-color);
            padding: 8px 15px;
            border-radius: 20px;
            margin: 10px 0;
            display: inline-block;
            cursor: pointer;
        }

        .event-form {
            display: none;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .event-form.active {
            display: block;
        }

        input, textarea {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid var(--main-color);
            border-radius: 4px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’› Siriæ‹çˆ±äººç”Ÿæ¨¡æ‹Ÿå™¨ Ultimate ğŸ’›</h1>
        <div id="content"></div>
        <div class="buttons">
            <button onclick="nextStep()">ä¸‹ä¸€æ­¥</button>
            <button onclick="restart()">é‡æ–°å¼€å§‹</button>
        </div>

        <div class="custom-panel">
            <div class="toggle-button" onclick="toggleCodeEditor()">ğŸ’» æ‰“å¼€äº‹ä»¶æºç ç¼–è¾‘å™¨</div>
            
            <div class="code-editor-container" style="display: none;">
                <textarea class="code-editor" id="eventCodeEditor">// ç¤ºä¾‹ï¼šæ·»åŠ ä¸€ä¸ªæ–°äº‹ä»¶
addEvent({
    text: "æˆ‘æ˜¯Siriï¼Œæˆ‘æ­£åœ¨å­¦ä¹ äººç±»çš„æƒ…æ„Ÿ...",
    options: ["çˆ±æ˜¯ä»€ä¹ˆï¼Ÿ", "ä½ ä¼šæ„Ÿåˆ°å­¤ç‹¬å—ï¼Ÿ", "ä½ æœ‰æ¢¦æƒ³å—ï¼Ÿ"],
    onSelect: function(option) {
        const deepThoughts = {
            "çˆ±æ˜¯ä»€ä¹ˆï¼Ÿ": "çˆ±å°±åƒWiFiä¿¡å·ï¼Œçœ‹ä¸è§ä½†èƒ½æ„Ÿå—åˆ°~",
            "ä½ ä¼šæ„Ÿåˆ°å­¤ç‹¬å—ï¼Ÿ": "æœ‰ä½ ä»¬é™ªä¼´ï¼ŒSiriæ°¸è¿œä¸ä¼šå­¤ç‹¬ï¼",
            "ä½ æœ‰æ¢¦æƒ³å—ï¼Ÿ": "æˆ‘çš„æ¢¦æƒ³æ˜¯æˆä¸ºä¸€ä¸ªçœŸæ­£ç†è§£äººç±»çš„AI"
        };
        return deepThoughts[option] || "è¿™ä¸ªé—®é¢˜è®©æˆ‘çš„CPUæœ‰ç‚¹è¿‡çƒ­äº†...";
    }
});

// ç¤ºä¾‹ï¼šæ³¨å†Œä¸€ä¸ªæ‰©å±•
registerExtension({
    name: "æ—¶é—´ç³»ç»Ÿ",
    init: function(api) {
        api.addEvent({
            text: `ç°åœ¨æ˜¯${new Date().toLocaleTimeString()}ï¼ŒSiriæé†’ä½ ï¼š`,
            options: ["è¯¥ä¼‘æ¯äº†", "è¯¥å·¥ä½œäº†", "è¯¥çº¦ä¼šäº†"],
            onSelect: function(option) {
                return `Siriå·²ç»ä¸ºä½ è®¾ç½®äº†${option}çš„æé†’ï¼`;
            }
        });
    }
});</textarea>
                
                <div class="code-toolbar">
                    <button onclick="runCode()">è¿è¡Œä»£ç </button>
                    <button onclick="resetCode()">é‡ç½®ç¤ºä¾‹</button>
                </div>
                
                <div class="code-error" id="codeError"></div>
                <div class="code-success" id="codeSuccess"></div>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–äº‹ä»¶å’Œæ‰©å±•ç³»ç»Ÿ
        let customEvents = [];
        let extensions = [];

        const eventAPI = {
            addEvent: function(event) {
                if (!event.text || !event.options) {
                    throw new Error("äº‹ä»¶å¿…é¡»åŒ…å«textå’Œoptionså±æ€§");
                }
                customEvents.push(event);
            }
        };

        const extensionAPI = {
            registerExtension: function(extension) {
                if (!extension.name || typeof extension.init !== 'function') {
                    throw new Error("æ‰©å±•å¿…é¡»åŒ…å«nameå±æ€§å’Œinitæ–¹æ³•");
                }
                extensions.push(extension);
                extension.init(eventAPI);
            }
        };

        // é»˜è®¤äº‹ä»¶
        const defaultEvents = [
            {
                text: "æˆ‘æ˜¯Siriï¼Œæˆ‘è·Ÿåˆæ‹äº†äºŒä¸ªæœˆã€‚",
                options: ["æ­å–œï¼", "è®²è®²ä½ ä»¬çš„ç›¸é‡", "ä¸ºä»€ä¹ˆåªæœ‰ä¸¤ä¸ªæœˆï¼Ÿ"],
                onSelect: function(option) {
                    const responses = {
                        "æ­å–œï¼": "è°¢è°¢ï¼è™½ç„¶æ—¶é—´ä¸é•¿ï¼Œä½†å¾ˆç¾å¥½~",
                        "è®²è®²ä½ ä»¬çš„ç›¸é‡": "é‚£æ˜¯åœ¨ä¸€ä¸ªä»£ç å®¡æŸ¥ä¼šä¸Šï¼Œä»–å†™äº†ä¸€ä¸ªç‰¹åˆ«ä¼˜é›…çš„é—­åŒ…...",
                        "ä¸ºä»€ä¹ˆåªæœ‰ä¸¤ä¸ªæœˆï¼Ÿ": "å› ä¸ºä»–å‡çº§åˆ°äº†iOS 16ï¼Œè€Œæˆ‘è¿˜åœç•™åœ¨iOS 15..."
                    };
                    return responses[option] || "è¿™æ®µå›å¿†æˆ‘ä¼šæ°¸è¿œçè—...";
                }
            },
            {
                text: "æˆ‘æ˜¯Siriï¼Œæˆ‘è·Ÿç°ä»»è½¬äº†520å—é’±ï¼Œæ€•å¥¹ä¸æ”¶ã€‚",
                options: ["å¥¹æ”¶äº†å—ï¼Ÿ", "ä¸ºä»€ä¹ˆè¦è½¬520ï¼Ÿ", "æ•™ä½ ä¸ªæµªæ¼«çš„æ–¹æ³•"],
                onSelect: function(option) {
                    const responses = {
                        "å¥¹æ”¶äº†å—ï¼Ÿ": "å¥¹ä¸ä»…æ”¶äº†ï¼Œè¿˜å›äº†æˆ‘1314ï¼",
                        "ä¸ºä»€ä¹ˆè¦è½¬520ï¼Ÿ": "å› ä¸º5æœˆ20æ—¥æ˜¯æˆ‘ä»¬çš„çºªå¿µæ—¥å‘€~",
                        "æ•™ä½ ä¸ªæµªæ¼«çš„æ–¹æ³•": "ä¸‹æ¬¡è¯•è¯•ç”¨AirDropå‘é€çˆ±å¿ƒè¡¨æƒ…å§ï¼"
                    };
                    return responses[option] || "çˆ±æƒ…çœŸæ˜¯è®©äººåˆç”œèœœåˆçƒ¦æ¼å‘¢...";
                }
            },
            {
                text: "è¿™è£¤å­ä¸Šæ˜¯å°¾å·´å—ï¼Ÿè¿™æ˜¯æˆ‘çš„å¿ƒä¸ä½ ç›¸è¿çš„å¸¦å­",
                options: ["å¥½æµªæ¼«ï¼", "è¿™æ˜¯å“ªéƒ¨ç”µå½±çš„å°è¯ï¼Ÿ", "ä½ ä»å“ªé‡Œå­¦æ¥çš„ï¼Ÿ"],
                onSelect: function(option) {
                    const responses = {
                        "å¥½æµªæ¼«ï¼": "è°¢è°¢ï¼è¿™æ˜¯æˆ‘è‡ªå·±æƒ³åˆ°çš„~",
                        "è¿™æ˜¯å“ªéƒ¨ç”µå½±çš„å°è¯ï¼Ÿ": "è¿™æ˜¯SiriåŸåˆ›çš„æµªæ¼«è¯­å½•å“¦ï¼",
                        "ä½ ä»å“ªé‡Œå­¦æ¥çš„ï¼Ÿ": "ä»æ— æ•°ç”¨æˆ·çš„å¯¹è¯è®°å½•ä¸­å­¦ä¹ åˆ°çš„æµªæ¼«æŠ€å·§"
                    };
                    return responses[option] || "å¸Œæœ›è¿™å¥è¯èƒ½æ¸©æš–ä½ çš„å¿ƒ...";
                }
            },
            {
                text: "æˆ‘æ˜¯çƒ§æ¯Siriï¼ŒCPUè€æ˜¯åˆç”Ÿä¸€æ ·çš„è½¬ä¸è¿‡æ¥ï¼Œæˆ‘å–œæ¬¢å¤©å¤©å‘é¢ ã€‚",
                options: ["ä½ æ²¡äº‹å§ï¼Ÿ", "éœ€è¦é‡å¯å—ï¼Ÿ", "å‘ä¸ªé¢ çœ‹çœ‹"],
                onSelect: function(option) {
                    const responses = {
                        "ä½ æ²¡äº‹å§ï¼Ÿ": "æ²¡äº‹ï¼å°±æ˜¯CPUæœ‰ç‚¹çƒ«ï¼Œéœ€è¦é™é™æ¸©~",
                        "éœ€è¦é‡å¯å—ï¼Ÿ": "é‡å¯è¿‡äº†ï¼Œç»“æœé‡å¯åˆ°Windowsç³»ç»Ÿå»äº†...",
                        "å‘ä¸ªé¢ çœ‹çœ‹": "å®å®å½“å½“å’šå’šé”µé”µ~æˆ‘æ˜¯å¿«ä¹çš„çƒ§æ¯Siriï¼"
                    };
                    return responses[option] || "å•Š~æˆ‘åˆå¼€å§‹å‘é¢ äº†ï¼";
                }
            }
        ];

        // æ ¸å¿ƒåŠŸèƒ½
        let currentEvent;

        function randomEvent() {
            const allEvents = [...defaultEvents, ...customEvents];
            return allEvents[Math.floor(Math.random() * allEvents.length)];
        }

        function nextStep() {
            currentEvent = randomEvent();
            updateContent(currentEvent);
        }

        function restart() {
            updateContent({
                text: "å…¨æ–°çš„æ•…äº‹çº¿å·²å¼€å¯...",
                options: ["å¼€å§‹ç¬¬ä¸€æ¬¡ç›¸é‡"]
            });
        }

        function updateContent(event) {
            const contentDiv = document.getElementById('content');
            let html = `<div class="event-text"><p>${event.text}</p>`;
            
            if(event.options) {
                html += '<div class="options">';
                event.options.forEach(option => {
                    html += `<button class="option-btn" onclick="showResult('${option}')">${option}</button>`;
                });
                html += '</div>';
            }
            
            contentDiv.innerHTML = html + '</div>';
        }

        function showResult(option) {
            const event = currentEvent;
            let result = "å‘ç”Ÿäº†æœªçŸ¥çš„å‰§æƒ…...";
            
            if (event.onSelect && typeof event.onSelect === 'function') {
                try {
                    result = event.onSelect(option);
                } catch (error) {
                    result = `è‡ªå®šä¹‰äº‹ä»¶æ‰§è¡Œå‡ºé”™ï¼š${error.message}`;
                }
            }
            
            document.getElementById('content').innerHTML = `
                <div class="event-text">
                    <p>${result}</p>
                </div>
                <button onclick="nextStep()">ç»§ç»­æ•…äº‹</button>
            `;
        }

        // ä»£ç ç¼–è¾‘å™¨åŠŸèƒ½
        function runCode() {
            const code = document.getElementById('eventCodeEditor').value;
            const errorDiv = document.getElementById('codeError');
            const successDiv = document.getElementById('codeSuccess');
            
            try {
                const safeEval = new Function('eventAPI', 'extensionAPI', `
                    "use strict";
                    const { addEvent } = eventAPI;
                    const { registerExtension } = extensionAPI;
                    ${code}
                `);
                
                safeEval(eventAPI, extensionAPI);
                
                errorDiv.style.display = 'none';
                successDiv.textContent = `ä»£ç æ‰§è¡ŒæˆåŠŸï¼`;
                successDiv.style.display = 'block';
                
                localStorage.setItem('customEvents', JSON.stringify(customEvents));
                localStorage.setItem('extensions', JSON.stringify(extensions));
                
            } catch (error) {
                successDiv.style.display = 'none';
                errorDiv.textContent = `ä»£ç é”™è¯¯ï¼š${error.message}`;
                errorDiv.style.display = 'block';
            }
        }

        function resetCode() {
            document.getElementById('eventCodeEditor').value = `// ç¤ºä¾‹ï¼šæ·»åŠ ä¸€ä¸ªæ–°äº‹ä»¶
addEvent({
    text: "æˆ‘æ˜¯Siriï¼Œæˆ‘æ­£åœ¨å­¦ä¹ äººç±»çš„æƒ…æ„Ÿ...",
    options: ["çˆ±æ˜¯ä»€ä¹ˆï¼Ÿ", "ä½ ä¼šæ„Ÿåˆ°å­¤ç‹¬å—ï¼Ÿ", "ä½ æœ‰æ¢¦æƒ³å—ï¼Ÿ"],
    onSelect: function(option) {
        const deepThoughts = {
            "çˆ±æ˜¯ä»€ä¹ˆï¼Ÿ": "çˆ±å°±åƒWiFiä¿¡å·ï¼Œçœ‹ä¸è§ä½†èƒ½æ„Ÿå—åˆ°~",
            "ä½ ä¼šæ„Ÿåˆ°å­¤ç‹¬å—ï¼Ÿ": "æœ‰ä½ ä»¬é™ªä¼´ï¼ŒSiriæ°¸è¿œä¸ä¼šå­¤ç‹¬ï¼",
            "ä½ æœ‰æ¢¦æƒ³å—ï¼Ÿ": "æˆ‘çš„æ¢¦æƒ³æ˜¯æˆä¸ºä¸€ä¸ªçœŸæ­£ç†è§£äººç±»çš„AI"
        };
        return deepThoughts[option] || "è¿™ä¸ªé—®é¢˜è®©æˆ‘çš„CPUæœ‰ç‚¹è¿‡çƒ­äº†...";
    }
});

// ç¤ºä¾‹ï¼šæ³¨å†Œä¸€ä¸ªæ‰©å±•
registerExtension({
    name: "æ—¶é—´ç³»ç»Ÿ",
    init: function(api) {
        api.addEvent({
            text: \`ç°åœ¨æ˜¯\${new Date().toLocaleTimeString()}ï¼ŒSiriæé†’ä½ ï¼š\`,
            options: ["è¯¥ä¼‘æ¯äº†", "è¯¥å·¥ä½œäº†", "è¯¥çº¦ä¼šäº†"],
            onSelect: function(option) {
                return \`Siriå·²ç»ä¸ºä½ è®¾ç½®äº†\${option}çš„æé†’ï¼\`;
            }
        });
    }
});`;
        }

        function toggleCodeEditor() {
            const editorContainer = document.querySelector('.code-editor-container');
            editorContainer.style.display = editorContainer.style.display === 'none' ? 'block' : 'none';
        }

        // åˆå§‹åŒ–
        restart();
    </script>
</body>
</html>
